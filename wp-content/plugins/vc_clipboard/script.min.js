(function(c){window.vcc_label_copy="Copy";window.vcc_label_copy_plus="Copy+";window.vcc_label_cut="Cut";window.vcc_label_cut_plus="Cut+";window.vcc_label_paste="Paste";c(document).on("mouseover","#visual_composer_content",function(){c(".wpb_vc_section > div.controls_row").on("mouseenter",function(t){if(c(this).find(".vc_clipboard").length==0){window.vcc_cb_count=localStorage.getItem("vcc_cb_count");if(window.vcc_cb_count===null)window.vcc_cb_count=0;var o='<div class="vc_clipboard" style="font-size:13px !important;"><span class="vcc_copy" title="Copy this section">'+window.vcc_label_copy+'</span> | <span class="vcc_copy_plus" title="Copy to clipboard stack">'+window.vcc_label_copy_plus+"</span> | ";if(!localStorage.getItem("vcc_prefs_cut")||localStorage.getItem("vcc_prefs_cut")==0){o+='<span class="vcc_cut" title="Cut this section">'+window.vcc_label_cut+'</span> | <span class="vcc_cut_plus" title="Move to clipboard stack">'+window.vcc_label_cut_plus+"</span> | "}o+='<span class="vcc_paste" title="Paste inside/after this section">'+window.vcc_label_paste+'</span> | <span class="vcc_number_reset" title="Click to clear clipboard">'+window.vcc_cb_count+"</span></div>";c(this).append(o);h=c(this).height();if(h>22){c("div.vc_clipboard").css("line-height",h+"px")}e()}});c(".wpb_vc_section > div.controls_row").on("mouseleave",function(){c(this).find(".vc_clipboard").remove()});c("div.controls_row").on("mouseenter",function(t){if(c(this).find(".vc_clipboard").length==0){window.vcc_cb_count=localStorage.getItem("vcc_cb_count");if(window.vcc_cb_count===null)window.vcc_cb_count=0;var o='<div class="vc_clipboard" style="font-size:13px !important;"><span class="vcc_copy" title="Copy this row">'+window.vcc_label_copy+'</span> | <span class="vcc_copy_plus" title="Copy to clipboard stack">'+window.vcc_label_copy_plus+"</span> | ";if(!localStorage.getItem("vcc_prefs_cut")||localStorage.getItem("vcc_prefs_cut")==0){o+='<span class="vcc_cut" title="Cut this row">'+window.vcc_label_cut+'</span> | <span class="vcc_cut_plus" title="Move to clipboard stack">'+window.vcc_label_cut_plus+"</span> | "}o+='<span class="vcc_paste" title="Paste after this row">'+window.vcc_label_paste+'</span> | <span class="vcc_number_reset" title="Click to clear clipboard">'+window.vcc_cb_count+"</span></div>";c(this).append(o);h=c(this).height();if(h>22){c("div.vc_clipboard").css("line-height",h+"px")}e()}});c("div.controls_row").on("mouseleave",function(){c(this).find(".vc_clipboard").remove()});c(".wpb_vc_column > .controls:first-child, .wpb_vc_column > .vc_controls:first-child, .wpb_vc_column_inner > .controls:first-child, .wpb_vc_column_inner > .vc_controls:first-child").on("mouseenter",function(){if(c(this).find(".vc_clipboard_col").length==0){window.vcc_cb_count=localStorage.getItem("vcc_cb_count");if(window.vcc_cb_count===null)window.vcc_cb_count=0;var t='<span class="vc_clipboard_col"><span class="vcc_copy" title="Copy content of this column">'+window.vcc_label_copy+"</span> | ";if(!localStorage.getItem("vcc_prefs_cut")||localStorage.getItem("vcc_prefs_cut")==0){t+='<span class="vcc_cut" title="Cut content of this column">'+window.vcc_label_cut+"</span> | "}t+='<span class="vcc_paste" title="Paste inside this column">'+window.vcc_label_paste+'</span> | <span class="vcc_number_reset" title="Click to clear clipboard">'+window.vcc_cb_count+"</span></span>";c(this).append(t);h=c(this).height();e()}});c(".wpb_vc_column .controls, .wpb_vc_column .vc_controls, .wpb_vc_column_inner .controls, .wpb_vc_column_inner .vc_controls").on("mouseleave",function(){c(this).find(".vc_clipboard_col").remove()});c("#visual_composer_content").on("mouseenter",".wpb_column_container > div",function(){var t=c(this).find(".vc_controls > div");if(t.find(".vcc_copy").length==0&&c(this).closest("div[data-element_type]").attr("data-model-id")!=undefined){window.vcc_cb_count=localStorage.getItem("vcc_cb_count");if(window.vcc_cb_count===null)window.vcc_cb_count=0;var o='<span class="vc_element-name vc_clipboard_element_root"><span class="vc_btn-content vc_clipboard_element"><span class="vcc_copy" title="Copy this element">C</span> | <span class="vcc_copy_plus" title="Copy to clipboard stack">C+</span> | ';if(!localStorage.getItem("vcc_prefs_cut")||localStorage.getItem("vcc_prefs_cut")==0){o+='<span class="vcc_cut" title="Cut this element">X</span> | <span class="vcc_cut_plus" title="Move to clipboard stack">X+</span> | '}o+='<span class="vcc_paste" title="Paste after this element">P</span> | <span class="vcc_number_reset" title="Click to clear clipboard">'+window.vcc_cb_count+"</span></span></span>";t.append(o);e()}});c("#visual_composer_content").on("mouseleave",".wpb_column_container > div",function(){c(this).find(".vc_clipboard_element_root").remove()})});c(document).ready(function(){setTimeout(function(){if(c(".vcc_paste_top").length==0){t()}},200)});c(window).load(function(){setTimeout(function(){if(c(".vcc_paste_top").length==0){t()}},200)});var e=function(){c(".vcc_copy").on("click",function(){if(window.vcc_cb_count>1){for(var e=2;e<=window.vcc_cb_count;e++){localStorage.removeItem("vcc_element_sc"+e);localStorage.removeItem("vcc_element_params"+e);localStorage.removeItem("vcc_elements"+e)}}id=c(this).closest("div[data-element_type]").attr("data-model-id");model=window.vc.app.views[id].model;shortcode=model.get("shortcode");window.vcc_elements=[];localStorage.setItem("vcc_element_sc1",shortcode);localStorage.setItem("vcc_element_params1",JSON.stringify(model.get("params")));_.each(window.vc.shortcodes.where({parent_id:model.id}),function(c){n(c,0)});localStorage.setItem("vcc_elements1",JSON.stringify(window.vcc_elements));localStorage.setItem("vcc_cb_count","1");c("span.vcc_number_reset").html("1");c(".vcc_number_reset_top").html("1");window.vcc_cb_count=1});c(".vcc_cut").on("click",function(){if(window.vcc_cb_count>1){for(var e=2;e<=window.vcc_cb_count;e++){localStorage.removeItem("vcc_element_sc"+e);localStorage.removeItem("vcc_element_params"+e);localStorage.removeItem("vcc_elements"+e)}}id=c(this).closest("div[data-element_type]").attr("data-model-id");model=window.vc.app.views[id].model;shortcode=model.get("shortcode");window.vcc_elements=[];localStorage.setItem("vcc_element_sc1",shortcode);localStorage.setItem("vcc_element_params1",JSON.stringify(model.get("params")));_.each(window.vc.shortcodes.where({parent_id:model.id}),function(c){n(c,0);if(shortcode=="vc_column"||shortcode=="vc_column_inner"){window.vc.app.views[c.attributes.id].model.destroy()}});localStorage.setItem("vcc_elements1",JSON.stringify(window.vcc_elements));localStorage.setItem("vcc_cb_count","1");c("span.vcc_number_reset").html("1");c(".vcc_number_reset_top").html("1");window.vcc_cb_count=1;if(shortcode!="vc_column"&&shortcode!="vc_column_inner"){window.vc.app.views[id].model.destroy()}});c(".vcc_copy_plus").on("click",function(){i=parseInt(window.vcc_cb_count)+1;id=c(this).closest("div[data-element_type]").attr("data-model-id");model=window.vc.app.views[id].model;shortcode=model.get("shortcode");var e=localStorage.getItem("vcc_element_sc1");if(e!==null){if(shortcode=="vc_section"&&e!="vc_section"||shortcode!="vc_section"&&e=="vc_section"||shortcode=="vc_row"&&e!="vc_row"||shortcode!="vc_row"&&e=="vc_row"||shortcode=="vc_row_inner"&&e!="vc_row_inner"||shortcode!="vc_row_inner"&&e=="vc_row_inner"||shortcode=="vc_column"&&e!="vc_column"||shortcode!="vc_column"&&e=="vc_column"||shortcode=="vc_column_inner"&&e!="vc_column_inner"||shortcode!="vc_column_inner"&&e=="vc_column_inner"){alert("Can't mix "+shortcode+" with "+e+"!");return}}window.vcc_elements=[];localStorage.setItem("vcc_element_sc"+i,shortcode);localStorage.setItem("vcc_element_params"+i,JSON.stringify(model.get("params")));_.each(window.vc.shortcodes.where({parent_id:model.id}),function(c){n(c,0)});localStorage.setItem("vcc_elements"+i,JSON.stringify(window.vcc_elements));window.vcc_cb_count++;localStorage.setItem("vcc_cb_count",""+window.vcc_cb_count);c("span.vcc_number_reset").html(window.vcc_cb_count);c(".vcc_number_reset_top").html(window.vcc_cb_count)});c(".vcc_cut_plus").on("click",function(){i=parseInt(window.vcc_cb_count)+1;id=c(this).closest("div[data-element_type]").attr("data-model-id");model=window.vc.app.views[id].model;shortcode=model.get("shortcode");var e=localStorage.getItem("vcc_element_sc1");if(e!==null){if(shortcode=="vc_row"&&e!="vc_row"||shortcode!="vc_row"&&e=="vc_row"||shortcode=="vc_column"&&e!="vc_column"||shortcode!="vc_column"&&e=="vc_column"){alert("Can't mix "+shortcode+" with "+e+"!");return}}window.vcc_elements=[];localStorage.setItem("vcc_element_sc"+i,shortcode);localStorage.setItem("vcc_element_params"+i,JSON.stringify(model.get("params")));_.each(window.vc.shortcodes.where({parent_id:model.id}),function(c){n(c,0)});localStorage.setItem("vcc_elements"+i,JSON.stringify(window.vcc_elements));window.vcc_cb_count++;localStorage.setItem("vcc_cb_count",""+window.vcc_cb_count);c("span.vcc_number_reset").html(window.vcc_cb_count);c(".vcc_number_reset_top").html(window.vcc_cb_count);window.vc.app.views[id].model.destroy()});c(".vcc_paste").on("click",function(){var e=-1;if(r(this)){window.vcc_total_count=0;window.vcc_current_count=0;var t=c(this).closest("div[data-element_type]");c("#vcc_paste_indicator").show();setTimeout(function(){for(var o=1;o<=window.vcc_cb_count;o++){vcc_elements=JSON.parse(localStorage.getItem("vcc_elements"+o));window.vcc_total_count+=vcc_elements.length}window.vcc_total_count=window.vcc_total_count+parseInt(window.vcc_cb_count);for(var o=1;o<=window.vcc_cb_count;o++){e=v(t,o,e)}c("#vcc_paste_indicator").hide()},100)}});c(".vcc_number_reset").on("click",function(){l()})};var t=function(){window.vcc_cb_count=localStorage.getItem("vcc_cb_count");if(window.vcc_cb_count===null)window.vcc_cb_count=0;if(c(".composer-switch").length==0&&c("#wpb_visual_composer").length>0&&c("#wpb_visual_composer").is(":visible")){c("#titlediv").after('<div class="composer-switch"></div>')}c(".composer-switch").append(' <span id="vcc_toolbar"><span id="vcc_toolbar_paste"><a href="#" class="vcc_paste_top" title="Paste">PASTE</a><a href="#" class="vcc_number_reset_top" title="Click to clear clipboard">'+window.vcc_cb_count+'</a></span> <span id="vcc_toolbar_impex"><a href="#" class="vcc_export" title="Export">EXPORT</a> <input type="text" class="vcc_input"> <a href="#" class="vcc_import" title="Import">IMPORT</a></span> '+'<span id="vcc_toolbar_gc_load" class="vcc_container"><a href="#" class="vcc_gc_load" title="Load from Google Cloud">GC LOAD</a>'+'<div class="vcc_load_dialog vcc_dialog"><div class="vcc_list"></div>'+'<img class="vcc_loader" src="'+window.bt_vcc_plugins_url+'/vc_clipboard/ajax-loader.gif"></span></div></span> '+'<span id="vcc_toolbar_gc_save" class="vcc_container"><a href="#" class="vcc_gc_save" title="Save to Google Cloud">GC SAVE</a>'+'<div class="vcc_save_dialog vcc_dialog">Name:<br><input type="text" id="vcc_name"><br><span class="vcc_dialog_buttons"><a href="#" class="vcc_save_submit" title="Submit">SUBMIT</a> <a href="#" class="vcc_save_cancel" title="Cancel">CANCEL</a><img class="vcc_loader" src="'+window.bt_vcc_plugins_url+'/vc_clipboard/ajax-loader.gif"></span></div></span> '+'<span id="vcc_toolbar_license" class="vcc_container"><a href="#" class="vcc_gc_settings" title="Activate product license">LICENSE</a>'+'<div class="vcc_activate_dialog vcc_dialog"><div>A valid license key qualifies you for support and enables Google Cloud template manager. A license key may only be used for one WPBakery Page Builder (Visual Composer) Clipboard installation on one WordPress site at a time. If you have activated your license key on another site, then you should <a href="http://codecanyon.net/item/visual-composer-clipboard/8897711" class="vcc_obtain">obtain new license key</a>.</div>Envato username:<br><input type="text" id="vcc_username"><br>Envato API key:<br><input type="text" id="vcc_api_key"><br>License key:<br><input type="text" id="vcc_license_key"><br><span class="vcc_dialog_buttons"><a href="#" class="vcc_gc_settings_submit" title="Submit">SUBMIT</a> <a href="#" class="vcc_gc_settings_cancel" title="Cancel">CANCEL</a><img class="vcc_loader" src="'+window.bt_vcc_plugins_url+'/vc_clipboard/ajax-loader.gif"></span></div></span> '+'<span class="vcc_container"><a href="#" class="vcc_prefs" title="Visual Composer Clipboard Preferences">VCC PREFS</a>'+'<div class="vcc_prefs_dialog vcc_dialog"><input id="vcc_prefs_short" type="checkbox"><label for="vcc_prefs_short">Short Commands</label><br><input id="vcc_prefs_toolbar" type="checkbox"><label for="vcc_prefs_toolbar">Toolbar Initially Closed</label><br><input id="vcc_prefs_cut" type="checkbox"><label for="vcc_prefs_cut">Hide Cut/Cut+ Buttons</label><br><input id="vcc_prefs_paste" type="checkbox"><label for="vcc_prefs_paste">Hide Paste Button</label><br><input id="vcc_prefs_impex" type="checkbox"><label for="vcc_prefs_impex">Hide Export/Import</label><br><input id="vcc_prefs_gc" type="checkbox"><label for="vcc_prefs_gc">Hide GC Buttons</label><br><input id="vcc_prefs_license" type="checkbox"><label for="vcc_prefs_license">Hide License Button</label></div></span>'+'</span><span class="vcc_oc_button o"></span><div id="vcc_paste_indicator">Pasting, please wait...</span></div>');if(localStorage.getItem("vcc_prefs_short")=="1"&&c("#vcc_prefs_short").length>0){c("#vcc_prefs_short")[0].checked=true;window.vcc_label_copy="C";window.vcc_label_copy_plus="C+";window.vcc_label_cut="X";window.vcc_label_cut_plus="X+";window.vcc_label_paste="P"}if(localStorage.getItem("vcc_prefs_toolbar")=="1"&&c("#vcc_prefs_toolbar").length>0){c("#vcc_prefs_toolbar")[0].checked=true;c(".vcc_oc_button").removeClass("o");c(".vcc_oc_button").addClass("c");c("#vcc_toolbar").hide()}if(localStorage.getItem("vcc_prefs_cut")=="1"&&c("#vcc_prefs_cut").length>0){c("#vcc_prefs_cut")[0].checked=true}if(localStorage.getItem("vcc_prefs_paste")=="1"&&c("#vcc_prefs_paste").length>0){c("#vcc_prefs_paste")[0].checked=true;c("#vcc_toolbar_paste").hide()}if(localStorage.getItem("vcc_prefs_impex")=="1"&&c("#vcc_prefs_impex").length>0){c("#vcc_prefs_impex")[0].checked=true;c("#vcc_toolbar_impex").hide()}if(localStorage.getItem("vcc_prefs_gc")=="1"&&c("#vcc_prefs_gc").length>0){c("#vcc_prefs_gc")[0].checked=true;c("#vcc_toolbar_gc_load").hide();c("#vcc_toolbar_gc_save").hide()}if(localStorage.getItem("vcc_prefs_license")=="1"&&c("#vcc_prefs_license").length>0){c("#vcc_prefs_license")[0].checked=true;c("#vcc_toolbar_license").hide()}c("#vcc_prefs_short").on("change",function(c){if(this.checked){localStorage.setItem("vcc_prefs_short","1");window.vcc_label_copy="C";window.vcc_label_copy_plus="C+";window.vcc_label_cut="X";window.vcc_label_cut_plus="X+";window.vcc_label_paste="P"}else{localStorage.setItem("vcc_prefs_short","0");window.vcc_label_copy="Copy";window.vcc_label_copy_plus="Copy+";window.vcc_label_cut="Cut";window.vcc_label_cut_plus="Cut+";window.vcc_label_paste="Paste"}});c("#vcc_prefs_toolbar").on("change",function(c){if(this.checked){localStorage.setItem("vcc_prefs_toolbar","1")}else{localStorage.setItem("vcc_prefs_toolbar","0")}});c("#vcc_prefs_cut").on("change",function(c){if(this.checked){localStorage.setItem("vcc_prefs_cut","1")}else{localStorage.setItem("vcc_prefs_cut","0")}});c("#vcc_prefs_paste").on("change",function(e){if(this.checked){localStorage.setItem("vcc_prefs_paste","1");c("#vcc_toolbar_paste").hide()}else{localStorage.setItem("vcc_prefs_paste","0");c("#vcc_toolbar_paste").show()}});c("#vcc_prefs_impex").on("change",function(e){if(this.checked){localStorage.setItem("vcc_prefs_impex","1");c("#vcc_toolbar_impex").hide()}else{localStorage.setItem("vcc_prefs_impex","0");c("#vcc_toolbar_impex").show()}});c("#vcc_prefs_gc").on("change",function(e){if(this.checked){localStorage.setItem("vcc_prefs_gc","1");c("#vcc_toolbar_gc_load").hide();c("#vcc_toolbar_gc_save").hide()}else{localStorage.setItem("vcc_prefs_gc","0");c("#vcc_toolbar_gc_load").show();c("#vcc_toolbar_gc_save").show()}});c("#vcc_prefs_license").on("change",function(e){if(this.checked){localStorage.setItem("vcc_prefs_license","1");c("#vcc_toolbar_license").hide()}else{localStorage.setItem("vcc_prefs_license","0");c("#vcc_toolbar_license").show()}});c(".vcc_oc_button").on("click",function(e){if(c(this).hasClass("o")){c(this).removeClass("o");c(this).addClass("c");c("#vcc_toolbar").hide()}else{c(this).removeClass("c");c(this).addClass("o");c("#vcc_toolbar").show()}});c(".vcc_paste_top").on("click",function(e){e.preventDefault();var t=-1;if(r(null)){window.vcc_total_count=0;window.vcc_current_count=0;c("#vcc_paste_indicator").show();setTimeout(function(){for(var e=1;e<=window.vcc_cb_count;e++){vcc_elements=JSON.parse(localStorage.getItem("vcc_elements"+e));window.vcc_total_count+=vcc_elements.length}window.vcc_total_count=window.vcc_total_count+parseInt(window.vcc_cb_count);for(var e=1;e<=window.vcc_cb_count;e++){t=v(null,e,t)}c("#vcc_paste_indicator").hide()},100)}});c(".vcc_input, #vcc_name, #vcc_username, #vcc_api_key, #vcc_license_key").keypress(function(e){if(e&&e.which===c.ui.keyCode.ENTER){e.preventDefault()}});c(".vcc_number_reset_top").on("click",function(c){c.preventDefault();l()});c(".vcc_import").on("click",function(e){e.preventDefault();if(c(".vcc_input").val()){s(c(".vcc_input").val())}});c(".vcc_export").on("click",function(e){e.preventDefault();if(window.vcc_cb_count>0){var t="[";for(var o=1;o<=window.vcc_cb_count;o++){t+='{"vcc_element_sc":"'+window.btoa(encodeURIComponent(localStorage.getItem("vcc_element_sc"+o)))+'",';t+='"vcc_element_params":"'+window.btoa(encodeURIComponent(localStorage.getItem("vcc_element_params"+o)))+'",';t+='"vcc_elements":"'+window.btoa(encodeURIComponent(localStorage.getItem("vcc_elements"+o)))+'"},'}t=t.substring(0,t.length-1);t+="]";c(".vcc_input").val(window.btoa(encodeURIComponent(t)));c(".vcc_input").select()}});c(".vcc_gc_load").on("click",function(e){e.preventDefault();if(c(".vcc_load_dialog").css("visibility")=="visible"){c(".vcc_load_dialog").css("visibility","hidden");return false}username=localStorage.getItem("vcc_username");license_key=localStorage.getItem("vcc_license_key");if(username!=null&&license_key!=null){c(".vcc_dialog").css("visibility","hidden");c(".vcc_load_dialog").css("visibility","visible");c(".vcc_load_dialog .vcc_list").html("");c(".vcc_load_dialog .vcc_loader").show();c.ajax({url:"https://focal-legacy-814.appspot.com/load_list",data:{username:username,license_key:license_key},error:function(){c(".vcc_load_dialog").css("visibility","hidden");alert("Error 01. Please try later.")},dataType:"jsonp",success:function(e){c(".vcc_load_dialog .vcc_loader").hide();if(e=="error"){c(".vcc_load_dialog").css("visibility","hidden");alert("Error 02. Please try later.")}else{if(e.length==0){c(".vcc_load_dialog").css("visibility","hidden");alert("No saved templates.")}else{for(i=0;i<e.length;i++){c(".vcc_load_dialog .vcc_list").append('<div class="vcc_list_item_container"><div class="vcc_list_item" title="Load '+e[i].name+' "data-item="'+e[i].name+'">'+e[i].name+'</div><div class="vcc_list_item_delete" title="Delete '+e[i].name+'" data-item="'+e[i].name+'"></div></div>')}a()}}},type:"GET"})}else{o();c(".vcc_dialog").css("visibility","hidden");c("#vcc_toolbar_license").show();c(".vcc_activate_dialog").css("visibility","visible")}});c(".vcc_gc_save").on("click",function(e){e.preventDefault();if(c(".vcc_save_dialog").css("visibility")=="visible"){c(".vcc_save_dialog").css("visibility","hidden");return false}username=localStorage.getItem("vcc_username");license_key=localStorage.getItem("vcc_license_key");if(username!=null&&license_key!=null){c(".vcc_dialog").css("visibility","hidden");c(".vcc_save_dialog").css("visibility","visible")}else{o();c(".vcc_dialog").css("visibility","hidden");c("#vcc_toolbar_license").show();c(".vcc_activate_dialog").css("visibility","visible")}});c(".vcc_save_submit").on("click",function(e){e.preventDefault();username=localStorage.getItem("vcc_username");license_key=localStorage.getItem("vcc_license_key");name=c("#vcc_name").val();if(name==""){alert("Enter template name.");return false}if(window.vcc_cb_count>0){var t="[";for(var i=1;i<=window.vcc_cb_count;i++){t+='{"vcc_element_sc":"'+window.btoa(encodeURIComponent(localStorage.getItem("vcc_element_sc"+i)))+'",';t+='"vcc_element_params":"'+window.btoa(encodeURIComponent(localStorage.getItem("vcc_element_params"+i)))+'",';t+='"vcc_elements":"'+window.btoa(encodeURIComponent(localStorage.getItem("vcc_elements"+i)))+'"},'}t=t.substring(0,t.length-1);t+="]";clipboard=window.btoa(encodeURIComponent(t));if(username!=null&&license_key!=null){c(".vcc_save_submit").hide();c(".vcc_save_cancel").hide();c(".vcc_save_dialog .vcc_loader").show();c.ajax({url:"https://focal-legacy-814.appspot.com/save",data:{username:username,license_key:license_key,clipboard:clipboard,name:name},error:function(){c(".vcc_save_submit").show();c(".vcc_save_cancel").show();c(".vcc_save_dialog .vcc_loader").hide();alert("Error 03. Please try later.")},dataType:"json",success:function(e){c(".vcc_save_submit").show();c(".vcc_save_cancel").show();c(".vcc_save_dialog .vcc_loader").hide();if(e=="ok"){c("#vcc_name").val("");c(".vcc_save_dialog").css("visibility","hidden");alert("Clipboard template saved.")}else if(e=="exists"){alert("Name already taken.")}else{alert("Error 04. Please try later.")}},type:"POST"})}else{o();c(".vcc_activate_dialog").css("visibility","visible")}}else{alert("Nothing to save.")}});c(".vcc_save_cancel").on("click",function(e){e.preventDefault();c(".vcc_save_dialog").css("visibility","hidden")});c(".vcc_gc_settings").on("click",function(e){e.preventDefault();if(c(".vcc_activate_dialog").css("visibility")=="visible"){c(".vcc_activate_dialog").css("visibility","hidden");return false}o();c(".vcc_dialog").css("visibility","hidden");c(".vcc_activate_dialog").css("visibility","visible")});c(".vcc_gc_settings_submit").on("click",function(e){e.preventDefault();username=c("#vcc_username").val();api_key=c("#vcc_api_key").val();license_key=c("#vcc_license_key").val();if(username!=null&&api_key!=null&&license_key!=null){c(".vcc_gc_settings_submit").hide();c(".vcc_gc_settings_cancel").hide();c(".vcc_activate_dialog .vcc_loader").show();c.ajax({url:"https://focal-legacy-814.appspot.com/activate",data:{username:username,api_key:api_key,license_key:license_key},error:function(){c(".vcc_gc_settings_submit").show();c(".vcc_gc_settings_cancel").show();c(".vcc_activate_dialog .vcc_loader").hide();alert("Error 05. Please try later.")},dataType:"jsonp",success:function(e){c(".vcc_gc_settings_submit").show();c(".vcc_gc_settings_cancel").show();c(".vcc_activate_dialog .vcc_loader").hide();if(e=="ok"){localStorage.setItem("vcc_username",username);localStorage.setItem("vcc_license_key",license_key);c(".vcc_activate_dialog").css("visibility","hidden");alert("WPBakery Page Builder (Visual Composer) Clipboard is now activated!")}else{alert("Error 06. Please try later.")}},type:"GET"})}else{o();c(".vcc_activate_dialog").css("visibility","visible")}});c(".vcc_gc_settings_cancel").on("click",function(e){e.preventDefault();c(".vcc_activate_dialog").css("visibility","hidden")});c(".vcc_prefs").on("click",function(e){e.preventDefault();if(c(".vcc_prefs_dialog").css("visibility")=="visible"){c(".vcc_prefs_dialog").css("visibility","hidden");return false}o();c(".vcc_dialog").css("visibility","hidden");c(".vcc_prefs_dialog").css("visibility","visible")})};var o=function(){username=localStorage.getItem("vcc_username")!=null?localStorage.getItem("vcc_username"):"";license_key=localStorage.getItem("vcc_license_key")!=null?localStorage.getItem("vcc_license_key"):"";c("#vcc_username").val(username);c("#vcc_license_key").val(license_key)};var a=function(){c(".vcc_list_item").on("click",function(e){var t=c(this).data("item");c(".vcc_dialog").css("visibility","hidden");c(".vcc_load_dialog").css("visibility","visible");c(".vcc_load_dialog .vcc_list").html("");c(".vcc_load_dialog .vcc_loader").show();c.ajax({url:"https://focal-legacy-814.appspot.com/load_item",data:{username:localStorage.getItem("vcc_username"),license_key:localStorage.getItem("vcc_license_key"),item_to_load:t},error:function(){c(".vcc_load_dialog").css("visibility","hidden");alert("Error 07. Please try later.")},dataType:"jsonp",success:function(e){c(".vcc_load_dialog .vcc_loader").hide();c(".vcc_load_dialog").css("visibility","hidden");if(e=="error"){alert("Error 08. Please try later.")}else{s(e)}},type:"GET"})});c(".vcc_list_item_delete").on("click",function(e){var t=c(this).data("item");c(".vcc_dialog").css("visibility","hidden");c(".vcc_load_dialog").css("visibility","visible");c(".vcc_load_dialog .vcc_list").html("");c(".vcc_load_dialog .vcc_loader").show();c.ajax({url:"https://focal-legacy-814.appspot.com/load_list",data:{username:localStorage.getItem("vcc_username"),license_key:localStorage.getItem("vcc_license_key"),item_to_delete:t},error:function(){c(".vcc_load_dialog").css("visibility","hidden");alert("Error 09. Please try later.")},dataType:"jsonp",success:function(e){c(".vcc_load_dialog .vcc_loader").hide();if(e=="error"){c(".vcc_load_dialog").css("visibility","hidden");alert("Error 10. Please try later.")}else{if(e.length==0){c(".vcc_load_dialog").css("visibility","hidden")}else{for(i=0;i<e.length;i++){c(".vcc_load_dialog .vcc_list").append('<div class="vcc_list_item_container"><div class="vcc_list_item" title="Load '+e[i].name+' "data-item="'+e[i].name+'">'+e[i].name+'</div><div class="vcc_list_item_delete" title="Delete '+e[i].name+'" data-item="'+e[i].name+'"></div></div>')}a()}}},type:"GET"})})};var s=function(e){var t=decodeURIComponent(window.atob(e));var o=JSON.parse(t);for(i=1;i<=o.length;i++){localStorage.setItem("vcc_element_sc"+i,decodeURIComponent(window.atob(o[i-1].vcc_element_sc)));localStorage.setItem("vcc_element_params"+i,decodeURIComponent(window.atob(o[i-1].vcc_element_params)));localStorage.setItem("vcc_elements"+i,decodeURIComponent(window.atob(o[i-1].vcc_elements)));window.vcc_cb_count=o.length;localStorage.setItem("vcc_cb_count",""+window.vcc_cb_count);c("span.vcc_number_reset").html(window.vcc_cb_count);c(".vcc_number_reset_top").html(window.vcc_cb_count)}};var l=function(){var e=confirm("Clear clipboard?");if(e==true){if(window.vcc_cb_count>0){for(var t=1;t<=window.vcc_cb_count;t++){localStorage.removeItem("vcc_element_sc"+t);localStorage.removeItem("vcc_element_params"+t);localStorage.removeItem("vcc_elements"+t)}}localStorage.setItem("vcc_cb_count","0");c("span.vcc_number_reset").html("0");c(".vcc_number_reset_top").html("0");window.vcc_cb_count=0}};var n=function(c,e){pid=c.attributes.parent_id;if(e==0){pid=0}window.vcc_elements.push({sc:c.get("shortcode"),params:JSON.stringify(c.get("params")),parent_id:pid,id:c.id,order:c.get("order")});_.each(window.vc.shortcodes.where({parent_id:c.id}),function(c){n(c,-1)})};var r=function(e){if(e!=null){id_this=c(e).closest("div[data-element_type]").attr("data-model-id");model_this=window.vc.app.views[id_this].model;shortcode_this=model_this.get("shortcode")}else{shortcode_this=""}sc=localStorage.getItem("vcc_element_sc1");if(shortcode_this=="vc_section"&&sc!="vc_section"&&sc!="vc_row"){alert("Can't paste "+sc+" inside/after vc_section!");return false}else if(shortcode_this=="vc_row"&&sc!="vc_row"){alert("Can't paste "+sc+" after vc_row!");return false}else if(shortcode_this=="vc_row_inner"&&sc!="vc_row_inner"){alert("Can't paste "+sc+" after vc_row_inner!");return false}else if((shortcode_this=="vc_column"||shortcode_this=="vc_column_inner")&&(sc=="vc_section"||sc=="vc_row")){alert("Can't paste "+sc+" inside "+shortcode_this+"!");return false}else if(shortcode_this==""&&sc=="vc_row_inner"){alert("Can't paste vc_row_inner as root element!\n\nYou can only paste it inside a column.");return false}else if(shortcode_this==""&&sc=="vc_column"){alert("Can't paste vc_column content to root!\n\nYou can only paste it inside a column.");return false}else if(shortcode_this==""&&sc=="vc_column_inner"){alert("Can't paste vc_column_inner content to root!\n\nYou can only paste it inside a column.");return false}else if(shortcode_this=="vc_column_inner"&&sc=="vc_column"){alert("Can't paste vc_column content to vc_column_inner!\n\nYou can only paste it inside a column.");return false}else if(shortcode_this=="vc_column_inner"&&sc=="vc_row_inner"){alert("Can't paste vc_row_inner to vc_column_inner!\n\nYou can only paste it inside a column.");return false}else if(shortcode_this==""&&sc!="vc_section"&&sc!="vc_row"){alert("Can't paste "+sc+" to root!\n\nYou can only paste it inside a column.");return false}else if((shortcode_this=="vc_row"||shortcode_this=="vc_row_inner")&&(sc=="vc_column"||sc=="vc_column_inner")){alert("Can't paste  "+sc+"  content after "+shortcode_this+"!\n\nYou can only paste it inside a column.");return false}return true};var v=function(e,t,o){parent_id=false;if(e!=null){id_this=e.attr("data-model-id");model_this=window.vc.app.views[id_this].model;shortcode_this=model_this.get("shortcode")}else{shortcode_this=""}if(shortcode_this!="vc_row"&&shortcode_this!="vc_section"){parent_id=c(e).closest('div[data-element_type="vc_column_inner"], div[data-element_type="vc_column"]').attr("data-model-id")}if(e!=null&&shortcode_this!="vc_column"&&shortcode_this!="vc_column_inner"){vc.clone_index=vc.clone_index/10;if(o===-1)o=c(e).closest('div[data-element_type="'+shortcode_this+'"]').attr("data-model-id");model=window.vc.app.views[o].model;new_order=parseFloat(model.get("order"))+vc.clone_index}else{new_order=-1}sc=localStorage.getItem("vcc_element_sc"+t);if(sc=="vc_row"){if(shortcode_this=="vc_section"){parent_id=id_this}else{var i=c(e).closest('div[data-element_type="vc_section"]').attr("data-model-id");if(i!==undefined){parent_id=i}}}var a=false;if((shortcode_this=="vc_column"||shortcode_this=="vc_column_inner")&&(sc=="vc_column"||sc=="vc_column_inner")){row_id=parent_id;a=true}else{params=JSON.parse(localStorage.getItem("vcc_element_params"+t));row_id=vc_guid();if(new_order==-1){window.vc.shortcodes.create({shortcode:sc,id:row_id,parent_id:parent_id,cloned:false,params:params})}else{window.vc.shortcodes.create({shortcode:sc,id:row_id,parent_id:parent_id,order:new_order,cloned:false,params:params})}window.vcc_current_count++;if(sc!="vc_row"&&sc!="vc_column"&&sc!="vc_column_inner"&&sc!="vc_row_inner"){_.each(window.vc.shortcodes.where({parent_id:row_id}),function(e){window.vc.app.views[e.id].model.destroy();if(e.attributes.shortcode=="vc_tab"){c("[data-model-id="+row_id+"] [href=#tab-"+e.attributes.params.tab_id+"]").parent().remove()}})}}vcc_elements=JSON.parse(localStorage.getItem("vcc_elements"+t));uid=(new Date).getTime()+t;_.each(vcc_elements,function(c){c.id=c.id+uid;if(c.parent_id==0){c.parent_id=row_id}else{c.parent_id=c.parent_id+uid}});_.each(vcc_elements,function(e){params=JSON.parse(e.params);if(params.tab_id!=undefined){params.tab_id=params.tab_id+uid}if(a){new_sc=window.vc.shortcodes.create({shortcode:e.sc,id:e.id,parent_id:e.parent_id,cloned:false,params:params})}else{new_sc=window.vc.shortcodes.create({shortcode:e.sc,id:e.id,parent_id:e.parent_id,order:e.order,cloned:false,params:params})}_.each(window.vc.shortcodes.where({parent_id:e.id}),function(e){window.vc.app.views[e.id].model.destroy();if(e.attributes.shortcode=="vc_tab"){c("[data-model-id="+row_id+"] [href=#tab-"+e.attributes.params.tab_id+"]").parent().remove()}});window.vcc_current_count++});c("ul.tabs_controls").each(function(){c(this).prependTo(c(this).parent())});return row_id}})(jQuery);
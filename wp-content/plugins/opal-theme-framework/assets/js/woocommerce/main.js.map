{"version":3,"sources":["before.js","main.js","after.js"],"names":["$","OpalWoocommerceMain","_classCallCheck","this","initCarousel","addedToCart","initWishlist","initVariableItem","_createClass","key","value","on","event","preventDefault","$item","currentTarget","$container","closest","hasClass","removeClass","find","remove","object","data","src","$img","$element","element","items","dot","items768","items980","owlCarousel","nav","dots","responsive","0","480","each","index","768","1200","$product","button","productName","text","template","wp","after","name","setTimeout","addClass","$wishlist","ajax","url","yith_wcwl_l10n","ajax_url","success","count","beforeSend","complete","document","ready","dataType","jQuery"],"mappings":"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","file":"main.js","sourcesContent":["(function ($) {","class OpalWoocommerceMain {\n    constructor() {\n        this.initCarousel();\n        this.addedToCart();\n        this.initWishlist();\n        this.initVariableItem();\n    }\n\n    initVariableItem(){\n        $('.otf-wrap-swatches .swatch').on('click', (event) => {\n            event.preventDefault();\n            let $item = $(event.currentTarget);\n            let $container = $item.closest('.product');\n\n            if($item.hasClass('checked')){\n                $container.removeClass('product-swatched');\n                $item.removeClass('checked');\n                $container.find('.product-image-swatch').remove();\n            }else{\n                $item.closest('.otf-wrap-swatches').find('.swatch').removeClass('checked');\n                $container.addClass('product-swatched product-swatch-loading');\n                $item.addClass('checked');\n                let object = $item.data('image');\n                if(object.src){\n                    let $img = $('<img />').on('load', (event) => {\n                        $container.find('.product-image-swatch').remove();\n                        $container.removeClass('product-swatch-loading');\n                        $container.find('.product-image').first().before(`<div class=\"product-image-swatch\">${event.currentTarget.outerHTML}</div>`);\n                    }).attr({\n                        src: object.src,\n                    });\n                    if(object.srcset){\n                        $img.attr(srcset, object.srcset);\n                    }\n                }\n            }\n        })\n    }\n\n    initCarousel() {\n        $('.woocommerce-carousel').each((index, element) => {\n            let $element   = $(element);\n            let items      = $element.data('columns');\n            let nav        = $element.data('nav');\n            let dot        = $element.data('dot');\n            let itemMobile = 1;\n            let items768   = 2;\n            let items980   = items;\n            if (items > 3) {\n                items980 = items - 1;\n                items768 = items - 2;\n            }\n            if (items < 2) {\n                items768 = items;\n            }\n            $element.find('> .products').owlCarousel({\n                items     : items,\n                nav       : nav,\n                dots      : dot,\n                responsive: {\n                    0   : {\n                        items: itemMobile,\n                        dots : false\n                    },\n                    480 : {\n                        items: itemMobile,\n                        dots : false\n                    },\n                    768 : {\n                        items: items768\n                    },\n                    980 : {\n                        items: items980\n                    },\n                    1200: {\n                        items: items\n                    }\n                }\n            })\n        });\n        $('.woocommerce-product-carousel').each((index, element) => {\n            let $element   = $(element);\n            let items      = $element.data('columns');\n            let itemMobile = 1;\n            let items768   = 2;\n            let items980   = items;\n            if (items > 3) {\n                items980 = items - 1;\n                items768 = items - 2;\n            }\n            if (items < 2) {\n                items768 = items;\n            }\n            $element.find('ul.products').owlCarousel({\n                items     : items,\n                nav       : true,\n                dots      : false,\n                responsive: {\n                    0   : {\n                        items: itemMobile,\n                    },\n                    480 : {\n                        items: itemMobile,\n                    },\n                    768 : {\n                        items: items768\n                    },\n                    980 : {\n                        items: items980\n                    },\n                    1200: {\n                        items: items\n                    }\n                }\n            })\n        });\n    }\n\n    addedToCart() {\n        let $product;\n        $('body').on('adding_to_cart', function (event, button) {\n            $product = button.closest('.product');\n        }).on('added_to_cart', function () {\n            let src         = $product.find('img').first().attr('src');\n            let productName = $product.find('.woocommerce-loop-product__title').text();\n            let template    = wp.template('added-to-cart-template');\n            $('#page-title-bar').after(template({src: src, name: productName}));\n            setTimeout(function () {\n                $('.notification-added-to-cart').addClass('hide');\n            }, 3000);\n        });\n    }\n\n    initWishlist() {\n        $(document).on('added_to_wishlist removed_from_wishlist', function () {\n            let $wishlist = $('.opal-header-wishlist');\n            $.ajax({\n                url       : yith_wcwl_l10n.ajax_url,\n                data      : {\n                    action: 'otf_update_wishlist_count'\n                },\n                dataType  : 'json',\n                success   : function (data) {\n                    $wishlist.find('.count').text(data.count);\n                },\n                beforeSend: function () {\n                },\n                complete  : function () {\n                }\n            })\n        })\n    }\n}\n\n$(document).ready(function () {\n    new OpalWoocommerceMain();\n});","})(jQuery);"]}